webpackJsonp([2,0],{0:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var a=n(159),r=s(a),i=n(210),o=s(i);r.default.config.ignoredElements=["home","page-two"],n(199),n(206),window.vm=new r.default({el:"#app",template:"<App/>",components:{App:o.default}})},160:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(211),r=s(a),i=n(212),o=s(i);t.default={name:"app",data:function(){return{app:phonon.navigator()}},mounted:function(){var e=this;this.$nextTick(function(){phonon.options({navigator:{defaultPage:"home",animatePages:!0,enableBrowserBackButton:!0},i18n:null}),window.setTimeout(function(){e.app.start()},500)})},components:{Home:r.default,PageTwo:o.default}}},161:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=s(a),i=n(202),o=s(i),d=n(163),u=s(d);window.on_qr=function(e){e=JSON.parse(e),0==e.ret?vm.$emit("on_qrcode",e.qr_code):phonon.alert("扫码失败，请重试","用户取消操作")},t.default={name:"PhononHomePage",props:{app:{type:Object}},created:function(){var e=this;this.$root.$on("on_qrcode",function(t){var n=(0,r.default)().format("YYYYMMDDHHmmssSSS");Pos.req_pay(n,e.p_name,e.price,t,function(t){var n=JSON.parse(t),s=""+n.result_code+n.err_code_des?"("+n.err_code_des+")":"";e.save_order(e.p_name,e.price,s)})})},mounted:function(){var e=this;this.app.on({page:"home",preventClose:!1,content:null}),this.get_his_data(),document.addEventListener("deviceready",function(){e.device_ready=!0},!1),this.fill_input()},data:function(){return{device_ready:!1,sel_item:"单剪",products:{"单剪":1,"洗吹剪":3,"染发+焗油":5,"卷发/拉直":7,"洗头、洗脚、按摩一条龙":10},p_name:"",price:"",his_order:[],begin_date:"",end_date:""}},computed:{is_empty:function(){return 0==o.default.size(this.his_order)},date_num:function(){return o.default.uniqBy(this.his_order,"date")},orders:function(){var e=this,t=o.default.orderBy(this.his_order,"dt","desc");return this.begin_date&&(t=o.default.filter(t,function(t){return t.dt>=e.begin_date})),this.end_date&&(t=o.default.filter(t,function(t){return t.dt<=e.end_date})),t}},methods:{filter_by_date:function(){console.log("begin_date="+this.begin_date,"end_date="+this.end_date)},read_qr:function(){return this.price&&this.p_name?void window.Pos.scan_by_camera(function(e){},function(e){alert(e)}):phonon.alert("名称 或 价格， 不能为空！","请填写商品信息")},fill_input:function(){this.price=this.products[this.sel_item],this.p_name=this.sel_item},get_his_data:function(){var e=this;u.default.then(function(t){e.his_order=t.his_order.find({}),0==e.his_order.length})},save_order:function(e,t,n){var s=this;u.default.then(function(a){var i=(0,r.default)().format("YYYY-MM-DD HH:mm:ss"),o={dt:i,name:e,price:t,status:n};a.his_order.insert(o),s.get_his_data()})}}}},162:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(159),r=s(a);r.default.directive("tap",{isFn:!0,bind:function(e,t){e.on("tap",t.value)}}),t.default={name:"PhononPageTwo",props:{app:{type:Object}},data:function(){return{pizza:"",action:null}},mounted:function(){this.app.on({page:"page-two",preventClose:!0},this)},methods:{onClose:function(e){null!==this.action?e.close():phonon.alert("Before leaving this page, you must perform an action.","Action required")},onHidden:function(){this.action=null},onHashChanged:function(e){this.pizza=e},onAction:function(e){this.action="user-action","order"===e.target.getAttribute("data-order")?phonon.alert("Thank you for your order!","Dear customer"):phonon.alert("Your order has been canceled.","Dear customer")}}}},163:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(164),r=s(a),i=n(203),o=s(i),d=n(40),u=s(d),l=new u.default,c=void 0;t.default=new r.default(function(e,t){if(c)e(c);else var n=new o.default("quote.db",{adapter:l,autoload:!0,autoloadCallback:function(){c={his_order:n.getCollection("his_order")?n.getCollection("his_order"):n.addCollection("his_order")},e(c)},autosave:!0,autosaveInterval:1e3})})},199:function(e,t){},200:function(e,t){},201:function(e,t){},204:function(e,t,n){function s(e){return n(a(e))}function a(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./af":41,"./af.js":41,"./ar":48,"./ar-dz":42,"./ar-dz.js":42,"./ar-kw":43,"./ar-kw.js":43,"./ar-ly":44,"./ar-ly.js":44,"./ar-ma":45,"./ar-ma.js":45,"./ar-sa":46,"./ar-sa.js":46,"./ar-tn":47,"./ar-tn.js":47,"./ar.js":48,"./az":49,"./az.js":49,"./be":50,"./be.js":50,"./bg":51,"./bg.js":51,"./bm":52,"./bm.js":52,"./bn":53,"./bn.js":53,"./bo":54,"./bo.js":54,"./br":55,"./br.js":55,"./bs":56,"./bs.js":56,"./ca":57,"./ca.js":57,"./cs":58,"./cs.js":58,"./cv":59,"./cv.js":59,"./cy":60,"./cy.js":60,"./da":61,"./da.js":61,"./de":64,"./de-at":62,"./de-at.js":62,"./de-ch":63,"./de-ch.js":63,"./de.js":64,"./dv":65,"./dv.js":65,"./el":66,"./el.js":66,"./en-au":67,"./en-au.js":67,"./en-ca":68,"./en-ca.js":68,"./en-gb":69,"./en-gb.js":69,"./en-ie":70,"./en-ie.js":70,"./en-nz":71,"./en-nz.js":71,"./eo":72,"./eo.js":72,"./es":75,"./es-do":73,"./es-do.js":73,"./es-us":74,"./es-us.js":74,"./es.js":75,"./et":76,"./et.js":76,"./eu":77,"./eu.js":77,"./fa":78,"./fa.js":78,"./fi":79,"./fi.js":79,"./fo":80,"./fo.js":80,"./fr":83,"./fr-ca":81,"./fr-ca.js":81,"./fr-ch":82,"./fr-ch.js":82,"./fr.js":83,"./fy":84,"./fy.js":84,"./gd":85,"./gd.js":85,"./gl":86,"./gl.js":86,"./gom-latn":87,"./gom-latn.js":87,"./gu":88,"./gu.js":88,"./he":89,"./he.js":89,"./hi":90,"./hi.js":90,"./hr":91,"./hr.js":91,"./hu":92,"./hu.js":92,"./hy-am":93,"./hy-am.js":93,"./id":94,"./id.js":94,"./is":95,"./is.js":95,"./it":96,"./it.js":96,"./ja":97,"./ja.js":97,"./jv":98,"./jv.js":98,"./ka":99,"./ka.js":99,"./kk":100,"./kk.js":100,"./km":101,"./km.js":101,"./kn":102,"./kn.js":102,"./ko":103,"./ko.js":103,"./ky":104,"./ky.js":104,"./lb":105,"./lb.js":105,"./lo":106,"./lo.js":106,"./lt":107,"./lt.js":107,"./lv":108,"./lv.js":108,"./me":109,"./me.js":109,"./mi":110,"./mi.js":110,"./mk":111,"./mk.js":111,"./ml":112,"./ml.js":112,"./mr":113,"./mr.js":113,"./ms":115,"./ms-my":114,"./ms-my.js":114,"./ms.js":115,"./my":116,"./my.js":116,"./nb":117,"./nb.js":117,"./ne":118,"./ne.js":118,"./nl":120,"./nl-be":119,"./nl-be.js":119,"./nl.js":120,"./nn":121,"./nn.js":121,"./pa-in":122,"./pa-in.js":122,"./pl":123,"./pl.js":123,"./pt":125,"./pt-br":124,"./pt-br.js":124,"./pt.js":125,"./ro":126,"./ro.js":126,"./ru":127,"./ru.js":127,"./sd":128,"./sd.js":128,"./se":129,"./se.js":129,"./si":130,"./si.js":130,"./sk":131,"./sk.js":131,"./sl":132,"./sl.js":132,"./sq":133,"./sq.js":133,"./sr":135,"./sr-cyrl":134,"./sr-cyrl.js":134,"./sr.js":135,"./ss":136,"./ss.js":136,"./sv":137,"./sv.js":137,"./sw":138,"./sw.js":138,"./ta":139,"./ta.js":139,"./te":140,"./te.js":140,"./tet":141,"./tet.js":141,"./th":142,"./th.js":142,"./tl-ph":143,"./tl-ph.js":143,"./tlh":144,"./tlh.js":144,"./tr":145,"./tr.js":145,"./tzl":146,"./tzl.js":146,"./tzm":148,"./tzm-latn":147,"./tzm-latn.js":147,"./tzm.js":148,"./uk":149,"./uk.js":149,"./ur":150,"./ur.js":150,"./uz":152,"./uz-latn":151,"./uz-latn.js":151,"./uz.js":152,"./vi":153,"./vi.js":153,"./x-pseudo":154,"./x-pseudo.js":154,"./yo":155,"./yo.js":155,"./zh-cn":156,"./zh-cn.js":156,"./zh-hk":157,"./zh-hk.js":157,"./zh-tw":158,"./zh-tw.js":158};s.keys=function(){return Object.keys(r)},s.resolve=a,e.exports=s,s.id=204},210:function(e,t,n){n(201);var s=n(23)(n(160),n(215),null,null);e.exports=s.exports},211:function(e,t,n){n(200);var s=n(23)(n(161),n(214),"data-v-afc1077a",null);e.exports=s.exports},212:function(e,t,n){var s=n(23)(n(162),n(213),null,null);e.exports=s.exports},213:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page-two",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("div",{staticClass:"left"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),e._v(" "),n("h1",{staticClass:"title"},[e._v("Page Two")])])]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"padded-full"},[n("h2",[e._v("Order")]),e._v(" "),n("p",[e._v("1x Pizza: "+e._s(e.pizza))]),e._v(" "),n("button",{directives:[{name:"tap",rawName:"v-tap",value:e.onAction,expression:"onAction"}],staticClass:"btn negative cancel",attrs:{"data-order":"cancel"}},[e._v("Cancel")]),e._v(" "),n("button",{directives:[{name:"tap",rawName:"v-tap",value:e.onAction,expression:"onAction"}],staticClass:"btn btn-flat primary order",attrs:{"data-order":"order"}},[e._v("Order")])])])])},staticRenderFns:[]}},214:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("home",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("div",{staticClass:"center"},[n("h1",{staticClass:"title"},[e._v("中网理发店收银台")])])]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"raido_group"},e._l(e.products,function(t,s){return n("div",[n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sel_item,expression:"sel_item"}],attrs:{type:"radio",name:"type"},domProps:{value:s,checked:e._q(e.sel_item,s)},on:{change:[function(t){e.sel_item=s},function(t){e.fill_input()}]}}),e._v(" "),n("span"),e._v(" "),n("span",{staticClass:"text"},[e._v(e._s(s+"("+t+"分钱)"))])])])})),e._v(" "),n("div",{staticClass:"parameters"},[n("div",[n("div",{staticClass:"caption"},[e._v("名称：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.p_name,expression:"p_name"}],attrs:{placeholder:"名称"},domProps:{value:e.p_name},on:{input:function(t){t.target.composing||(e.p_name=t.target.value)}}})]),e._v(" "),n("div",[n("div",{staticClass:"caption"},[e._v("价格：")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.price,expression:"price",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"价格"},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),n("div",{staticStyle:{"justify-content":"space-around","margin-top":"10px"}},[e.device_ready?n("button",{staticClass:"btn primary",staticStyle:{flex:"1"},on:{click:function(t){t.preventDefault(),e.read_qr()}}},[n("h3",{staticStyle:{display:"inline-block",margin:"auto"}},[e._v("读取付款码收款")])]):e._e()]),e._v(" "),e.date_num.length>5?n("div",{staticStyle:{"justify-content":"space-around"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.begin_date,expression:"begin_date"}],staticStyle:{flex:"1"},attrs:{type:"date",placeholder:"起始日期"},domProps:{value:e.begin_date},on:{change:function(t){e.filter_by_date()},input:function(t){t.target.composing||(e.begin_date=t.target.value)}}}),e._v(" "),n("div",{staticClass:"caption"},[e._v("——")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.end_date,expression:"end_date"}],staticStyle:{flex:"1"},attrs:{type:"date",placeholder:"截止日期"},domProps:{value:e.end_date},on:{change:function(t){e.filter_by_date()},input:function(t){t.target.composing||(e.end_date=t.target.value)}}})]):e._e(),e._v(" "),n("span",{staticClass:"his-data",staticStyle:{"margin-top":"10px"}},e._l(e.orders,function(t){return n("div",{staticClass:"order"},[n("div",{staticStyle:{"font-size":"24px"}},[e._v(e._s(t.dt))]),e._v(" "),n("div",{staticClass:"order_info"},[n("div",[e._v(e._s(t.name))]),e._v(" "),n("div",[e._v(e._s(t.price)+"(分钱)")]),e._v(" "),n("div",[e._v(e._s(t.status))])])])}))])])},staticRenderFns:[]}},215:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("home",{attrs:{app:e.app}}),e._v(" "),n("page-two",{attrs:{app:e.app}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=app.893e9b77281ae69bb8a7.js.map