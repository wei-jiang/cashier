webpackJsonp([2,0],{0:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=n(180),i=a(s);n(241);var o=n(260),r=a(o);n(33),i.default.config.ignoredElements=["home","page-two"],n(242),n(252),window.vm=new i.default({el:"#app",template:"<App/>",components:{App:r.default}})},33:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(191),i=a(s),o=n(192),r=a(o),u=n(54),d=(a(u),n(1)),l=(a(d),n(254)),c=a(l),p=function(){function e(){var t=this;(0,i.default)(this,e),document.addEventListener("deviceready",function(){t.sock=(0,c.default)("https://pay.cninone.com"),t.sock.on("connect",t.on_connect.bind(t)),t.sock.on("refresh_file_list",t.on_refresh_file_list.bind(t))})}return(0,r.default)(e,[{key:"register_ui_evt",value:function(){var e=this;vm.$on("notify_seller_status",function(t){e.emit("notify_seller_status",t)})}},{key:"on_connect",value:function(){}},{key:"on_refresh_file_list",value:function(e){vm.$emit("refresh_file_list","")}},{key:"emit",value:function(e,t,n){this.sock&&this.sock.emit(e,t,n)}}]),e}();t.default=new p},184:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(261),i=a(s),o=n(262),r=a(o);t.default={name:"app",data:function(){return{app:phonon.navigator()}},mounted:function(){var e=this;this.$nextTick(function(){phonon.options({navigator:{defaultPage:"home",animatePages:!0,enableBrowserBackButton:!0},i18n:null}),window.setTimeout(function(){e.app.start()},500)})},components:{Home:i.default,PageTwo:r.default}}},185:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(188),i=a(s),o=n(1),r=a(o),u=n(54),d=a(u),l=n(251),c=(a(l),n(187)),p=a(c),f=n(33),_=a(f);window.on_qr=function(e){e=JSON.parse(e),0==e.ret?(alert(e.qr_code),vm.$emit("on_qrcode",e.qr_code)):phonon.alert("扫码失败，请重试","用户取消操作")};var v="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoi6JSh5Lym56u55rW3Iiwid3hfaWQiOiIxNDk2MTMzMDYyIiwiYWx5X2lkIjoiMjA4ODQyMTc1ODIyMjgyNyIsImFsaSI6eyJhcHBfYXV0aF90b2tlbiI6IjIwMTgwMUJCYmM4N2RlOTc1YjM2NDMxMTlhYzQzZGEwODAwYjNYODIiLCJhcHBfcmVmcmVzaF90b2tlbiI6IjIwMTgwMUJCMjM4NTBhZGUzZmM2NGJmZmJhZmNkMzEyZDhmMDZYODIiLCJleHBpcmVzX2luIjozMTUzNjAwMCwicmVfZXhwaXJlc19pbiI6MzIxNDA4MDB9LCJib2R5Ijoi6Ieq6am-6L2m56WoIiwidG90YWxfZmVlIjoiMSIsImlhdCI6MTUxNTQ2Mjc0OX0.Xpz6WVnQvMYZEEmerCQLB5DwIbMQp7nkf63rJKWZYZk";t.default={name:"PhononHomePage",props:{app:{type:Object}},created:function(){var e=this;this.$root.$on("on_qrcode",function(t){var n=parseInt(t.slice(0,2));n>=10&&n<=15?_.default.emit("wx_auth_pay",{token:v,body:e.p_name,total_fee:e.price,auth_code:t},function(e){alert((0,i.default)(e))}):n>=25&&n<=30&&_.default.emit("ali_auth_pay",{token:v,body:e.p_name,total_fee:e.price,auth_code:t},function(e){alert((0,i.default)(e))})})},mounted:function(){var e=this;this.app.on({page:"home",preventClose:!1,content:null}),this.get_his_data(),document.addEventListener("deviceready",function(){e.device_ready=!0},!1),this.fill_input()},data:function(){return{device_ready:!1,sel_item:"单剪",products:{"单剪":1,"洗吹剪":3,"染发+焗油":5,"卷发/拉直":7,"洗头、洗脚、按摩一条龙":10},p_name:"",price:"",his_order:[],begin_date:"",end_date:""}},computed:{is_empty:function(){return 0==d.default.size(this.his_order)},date_num:function(){return d.default.uniqBy(this.his_order,"date")},orders:function(){var e=this,t=d.default.orderBy(this.his_order,"dt","desc");return this.begin_date&&(t=d.default.filter(t,function(t){return t.dt>=e.begin_date})),this.end_date&&(t=d.default.filter(t,function(t){return t.dt<=e.end_date})),t}},methods:{filter_by_date:function(){console.log("begin_date="+this.begin_date,"end_date="+this.end_date)},read_qr:function(){return this.price&&this.p_name?void window.Pos.scan_by_camera(function(e){},function(e){alert(e)}):phonon.alert("名称 或 价格， 不能为空！","请填写商品信息")},fill_input:function(){this.price=this.products[this.sel_item],this.p_name=this.sel_item},get_his_data:function(){var e=this;p.default.then(function(t){e.his_order=t.his_order.find({}),0==e.his_order.length})},save_order:function(e,t,n){var a=this;p.default.then(function(s){var i=(0,r.default)().format("YYYY-MM-DD HH:mm:ss"),o={dt:i,name:e,price:t,status:n};s.his_order.insert(o),a.get_his_data()})}}}},186:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(180),i=a(s);i.default.directive("tap",{isFn:!0,bind:function(e,t){e.on("tap",t.value)}}),t.default={name:"PhononPageTwo",props:{app:{type:Object}},data:function(){return{pizza:"",action:null}},mounted:function(){this.app.on({page:"page-two",preventClose:!0},this)},methods:{onClose:function(e){null!==this.action?e.close():phonon.alert("Before leaving this page, you must perform an action.","Action required")},onHidden:function(){this.action=null},onHashChanged:function(e){this.pizza=e},onAction:function(e){this.action="user-action","order"===e.target.getAttribute("data-order")?phonon.alert("Thank you for your order!","Dear customer"):phonon.alert("Your order has been canceled.","Dear customer")}}}},187:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(190),i=a(s),o=n(247),r=a(o),u=n(55),d=a(u),l=new d.default,c=void 0;t.default=new i.default(function(e,t){if(c)e(c);else var n=new r.default("quote.db",{adapter:l,autoload:!0,autoloadCallback:function(){c={his_order:n.getCollection("his_order")?n.getCollection("his_order"):n.addCollection("his_order")},e(c)},autosave:!0,autosaveInterval:1e3})})},241:function(e,t){},242:function(e,t){},243:function(e,t){},244:function(e,t){},248:function(e,t,n){function a(e){return n(s(e))}function s(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./af":56,"./af.js":56,"./ar":63,"./ar-dz":57,"./ar-dz.js":57,"./ar-kw":58,"./ar-kw.js":58,"./ar-ly":59,"./ar-ly.js":59,"./ar-ma":60,"./ar-ma.js":60,"./ar-sa":61,"./ar-sa.js":61,"./ar-tn":62,"./ar-tn.js":62,"./ar.js":63,"./az":64,"./az.js":64,"./be":65,"./be.js":65,"./bg":66,"./bg.js":66,"./bm":67,"./bm.js":67,"./bn":68,"./bn.js":68,"./bo":69,"./bo.js":69,"./br":70,"./br.js":70,"./bs":71,"./bs.js":71,"./ca":72,"./ca.js":72,"./cs":73,"./cs.js":73,"./cv":74,"./cv.js":74,"./cy":75,"./cy.js":75,"./da":76,"./da.js":76,"./de":79,"./de-at":77,"./de-at.js":77,"./de-ch":78,"./de-ch.js":78,"./de.js":79,"./dv":80,"./dv.js":80,"./el":81,"./el.js":81,"./en-au":82,"./en-au.js":82,"./en-ca":83,"./en-ca.js":83,"./en-gb":84,"./en-gb.js":84,"./en-ie":85,"./en-ie.js":85,"./en-nz":86,"./en-nz.js":86,"./eo":87,"./eo.js":87,"./es":90,"./es-do":88,"./es-do.js":88,"./es-us":89,"./es-us.js":89,"./es.js":90,"./et":91,"./et.js":91,"./eu":92,"./eu.js":92,"./fa":93,"./fa.js":93,"./fi":94,"./fi.js":94,"./fo":95,"./fo.js":95,"./fr":98,"./fr-ca":96,"./fr-ca.js":96,"./fr-ch":97,"./fr-ch.js":97,"./fr.js":98,"./fy":99,"./fy.js":99,"./gd":100,"./gd.js":100,"./gl":101,"./gl.js":101,"./gom-latn":102,"./gom-latn.js":102,"./gu":103,"./gu.js":103,"./he":104,"./he.js":104,"./hi":105,"./hi.js":105,"./hr":106,"./hr.js":106,"./hu":107,"./hu.js":107,"./hy-am":108,"./hy-am.js":108,"./id":109,"./id.js":109,"./is":110,"./is.js":110,"./it":111,"./it.js":111,"./ja":112,"./ja.js":112,"./jv":113,"./jv.js":113,"./ka":114,"./ka.js":114,"./kk":115,"./kk.js":115,"./km":116,"./km.js":116,"./kn":117,"./kn.js":117,"./ko":118,"./ko.js":118,"./ky":119,"./ky.js":119,"./lb":120,"./lb.js":120,"./lo":121,"./lo.js":121,"./lt":122,"./lt.js":122,"./lv":123,"./lv.js":123,"./me":124,"./me.js":124,"./mi":125,"./mi.js":125,"./mk":126,"./mk.js":126,"./ml":127,"./ml.js":127,"./mr":128,"./mr.js":128,"./ms":130,"./ms-my":129,"./ms-my.js":129,"./ms.js":130,"./my":131,"./my.js":131,"./nb":132,"./nb.js":132,"./ne":133,"./ne.js":133,"./nl":135,"./nl-be":134,"./nl-be.js":134,"./nl.js":135,"./nn":136,"./nn.js":136,"./pa-in":137,"./pa-in.js":137,"./pl":138,"./pl.js":138,"./pt":140,"./pt-br":139,"./pt-br.js":139,"./pt.js":140,"./ro":141,"./ro.js":141,"./ru":142,"./ru.js":142,"./sd":143,"./sd.js":143,"./se":144,"./se.js":144,"./si":145,"./si.js":145,"./sk":146,"./sk.js":146,"./sl":147,"./sl.js":147,"./sq":148,"./sq.js":148,"./sr":150,"./sr-cyrl":149,"./sr-cyrl.js":149,"./sr.js":150,"./ss":151,"./ss.js":151,"./sv":152,"./sv.js":152,"./sw":153,"./sw.js":153,"./ta":154,"./ta.js":154,"./te":155,"./te.js":155,"./tet":156,"./tet.js":156,"./th":157,"./th.js":157,"./tl-ph":158,"./tl-ph.js":158,"./tlh":159,"./tlh.js":159,"./tr":160,"./tr.js":160,"./tzl":161,"./tzl.js":161,"./tzm":163,"./tzm-latn":162,"./tzm-latn.js":162,"./tzm.js":163,"./uk":164,"./uk.js":164,"./ur":165,"./ur.js":165,"./uz":167,"./uz-latn":166,"./uz-latn.js":166,"./uz.js":167,"./vi":168,"./vi.js":168,"./x-pseudo":169,"./x-pseudo.js":169,"./yo":170,"./yo.js":170,"./zh-cn":171,"./zh-cn.js":171,"./zh-hk":172,"./zh-hk.js":172,"./zh-tw":173,"./zh-tw.js":173};a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id=248},260:function(e,t,n){n(244);var a=n(32)(n(184),n(265),null,null);e.exports=a.exports},261:function(e,t,n){n(243);var a=n(32)(n(185),n(264),"data-v-afc1077a",null);e.exports=a.exports},262:function(e,t,n){var a=n(32)(n(186),n(263),null,null);e.exports=a.exports},263:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page-two",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("div",{staticClass:"left"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),e._v(" "),n("h1",{staticClass:"title"},[e._v("Page Two")])])]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"padded-full"},[n("h2",[e._v("Order")]),e._v(" "),n("p",[e._v("1x Pizza: "+e._s(e.pizza))]),e._v(" "),n("button",{directives:[{name:"tap",rawName:"v-tap",value:e.onAction,expression:"onAction"}],staticClass:"btn negative cancel",attrs:{"data-order":"cancel"}},[e._v("Cancel")]),e._v(" "),n("button",{directives:[{name:"tap",rawName:"v-tap",value:e.onAction,expression:"onAction"}],staticClass:"btn btn-flat primary order",attrs:{"data-order":"order"}},[e._v("Order")])])])])},staticRenderFns:[]}},264:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("home",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("div",{staticClass:"center"},[n("h1",{staticClass:"title"},[e._v("中网理发店收银台")])])]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"raido_group"},e._l(e.products,function(t,a){return n("div",[n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sel_item,expression:"sel_item"}],attrs:{type:"radio",name:"type"},domProps:{value:a,checked:e._q(e.sel_item,a)},on:{change:[function(t){e.sel_item=a},function(t){e.fill_input()}]}}),e._v(" "),n("span"),e._v(" "),n("span",{staticClass:"text"},[e._v(e._s(a+"("+t+"分钱)"))])])])})),e._v(" "),n("div",{staticClass:"parameters"},[n("div",[n("div",{staticClass:"caption"},[e._v("名称：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.p_name,expression:"p_name"}],attrs:{placeholder:"名称"},domProps:{value:e.p_name},on:{input:function(t){t.target.composing||(e.p_name=t.target.value)}}})]),e._v(" "),n("div",[n("div",{staticClass:"caption"},[e._v("价格：")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.price,expression:"price",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"价格"},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),n("div",{staticStyle:{"justify-content":"space-around","margin-top":"10px"}},[e.device_ready?n("button",{staticClass:"btn primary",staticStyle:{flex:"1"},on:{click:function(t){t.preventDefault(),e.read_qr()}}},[n("h3",{staticStyle:{display:"inline-block",margin:"auto"}},[e._v("读取付款码收款")])]):e._e()]),e._v(" "),e.date_num.length>5?n("div",{staticStyle:{"justify-content":"space-around"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.begin_date,expression:"begin_date"}],staticStyle:{flex:"1"},attrs:{type:"date",placeholder:"起始日期"},domProps:{value:e.begin_date},on:{change:function(t){e.filter_by_date()},input:function(t){t.target.composing||(e.begin_date=t.target.value)}}}),e._v(" "),n("div",{staticClass:"caption"},[e._v("——")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.end_date,expression:"end_date"}],staticStyle:{flex:"1"},attrs:{type:"date",placeholder:"截止日期"},domProps:{value:e.end_date},on:{change:function(t){e.filter_by_date()},input:function(t){t.target.composing||(e.end_date=t.target.value)}}})]):e._e(),e._v(" "),n("span",{staticClass:"his-data",staticStyle:{"margin-top":"10px"}},e._l(e.orders,function(t){return n("div",{staticClass:"order"},[n("div",{staticStyle:{"font-size":"24px"}},[e._v(e._s(t.dt))]),e._v(" "),n("div",{staticClass:"order_info"},[n("div",[e._v(e._s(t.name))]),e._v(" "),n("div",[e._v(e._s(t.price)+"(分钱)")]),e._v(" "),n("div",[e._v(e._s(t.status))])])])}))])])},staticRenderFns:[]}},265:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("home",{attrs:{app:e.app}}),e._v(" "),n("page-two",{attrs:{app:e.app}})],1)},staticRenderFns:[]}},266:function(e,t){}});
//# sourceMappingURL=app.182a81203a089f5f8975.js.map