webpackJsonp([2,0],{0:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var a=n(179),i=s(a),r=n(256),o=s(r);n(187),i.default.config.ignoredElements=["home","page-two"],n(239),n(248),window.vm=new i.default({el:"#app",template:"<App/>",components:{App:o.default}})},183:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(257),i=s(a),r=n(258),o=s(r);t.default={name:"app",data:function(){return{app:phonon.navigator()}},mounted:function(){var e=this;this.$nextTick(function(){phonon.options({navigator:{defaultPage:"home",animatePages:!0,enableBrowserBackButton:!0},i18n:null}),window.setTimeout(function(){e.app.start()},500)})},components:{Home:i.default,PageTwo:o.default}}},184:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=s(a),r=n(53),o=s(r),d=n(186),u=s(d);window.on_qr=function(e){e=JSON.parse(e),0==e.ret?vm.$emit("on_qrcode",e.qr_code):phonon.alert("扫码失败，请重试","用户取消操作")},t.default={name:"PhononHomePage",props:{app:{type:Object}},created:function(){var e=this;this.$root.$on("on_qrcode",function(t){var n=(0,i.default)().format("YYYYMMDDHHmmssSSS");Pos.req_pay(n,e.p_name,e.price,t,function(t){var n=JSON.parse(t),s=""+n.result_code+n.err_code_des?"("+n.err_code_des+")":"";e.save_order(e.p_name,e.price,s)})})},mounted:function(){var e=this;this.app.on({page:"home",preventClose:!1,content:null}),this.get_his_data(),document.addEventListener("deviceready",function(){e.device_ready=!0},!1),this.fill_input()},data:function(){return{device_ready:!1,sel_item:"单剪",products:{"单剪":1,"洗吹剪":3,"染发+焗油":5,"卷发/拉直":7,"洗头、洗脚、按摩一条龙":10},p_name:"",price:"",his_order:[],begin_date:"",end_date:""}},computed:{is_empty:function(){return 0==o.default.size(this.his_order)},date_num:function(){return o.default.uniqBy(this.his_order,"date")},orders:function(){var e=this,t=o.default.orderBy(this.his_order,"dt","desc");return this.begin_date&&(t=o.default.filter(t,function(t){return t.dt>=e.begin_date})),this.end_date&&(t=o.default.filter(t,function(t){return t.dt<=e.end_date})),t}},methods:{filter_by_date:function(){console.log("begin_date="+this.begin_date,"end_date="+this.end_date)},read_qr:function(){return this.price&&this.p_name?void window.Pos.scan_by_camera(function(e){},function(e){alert(e)}):phonon.alert("名称 或 价格， 不能为空！","请填写商品信息")},fill_input:function(){this.price=this.products[this.sel_item],this.p_name=this.sel_item},get_his_data:function(){var e=this;u.default.then(function(t){e.his_order=t.his_order.find({}),0==e.his_order.length})},save_order:function(e,t,n){var s=this;u.default.then(function(a){var r=(0,i.default)().format("YYYY-MM-DD HH:mm:ss"),o={dt:r,name:e,price:t,status:n};a.his_order.insert(o),s.get_his_data()})}}}},185:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(179),i=s(a);i.default.directive("tap",{isFn:!0,bind:function(e,t){e.on("tap",t.value)}}),t.default={name:"PhononPageTwo",props:{app:{type:Object}},data:function(){return{pizza:"",action:null}},mounted:function(){this.app.on({page:"page-two",preventClose:!0},this)},methods:{onClose:function(e){null!==this.action?e.close():phonon.alert("Before leaving this page, you must perform an action.","Action required")},onHidden:function(){this.action=null},onHashChanged:function(e){this.pizza=e},onAction:function(e){this.action="user-action","order"===e.target.getAttribute("data-order")?phonon.alert("Thank you for your order!","Dear customer"):phonon.alert("Your order has been canceled.","Dear customer")}}}},186:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(189),i=s(a),r=n(244),o=s(r),d=n(54),u=s(d),l=new u.default,c=void 0;t.default=new i.default(function(e,t){if(c)e(c);else var n=new o.default("quote.db",{adapter:l,autoload:!0,autoloadCallback:function(){c={his_order:n.getCollection("his_order")?n.getCollection("his_order"):n.addCollection("his_order")},e(c)},autosave:!0,autosaveInterval:1e3})})},187:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(190),i=s(a),r=n(191),o=s(r),d=n(53),u=(s(d),n(1)),l=(s(u),n(250)),c=s(l),p=function(){function e(){(0,i.default)(this,e),this.sock=(0,c.default)(),this.sock.on("connect",this.on_connect.bind(this)),this.sock.on("refresh_file_list",this.on_refresh_file_list.bind(this))}return(0,o.default)(e,[{key:"register_ui_evt",value:function(){var e=this;vm.$on("notify_seller_status",function(t){e.emit("notify_seller_status",t)})}},{key:"on_connect",value:function(){}},{key:"on_refresh_file_list",value:function(e){vm.$emit("refresh_file_list","")}},{key:"emit",value:function(e,t,n){this.sock&&this.sock.emit(e,t,n)}}]),e}();t.default=new p},239:function(e,t){},240:function(e,t){},241:function(e,t){},245:function(e,t,n){function s(e){return n(a(e))}function a(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./af":55,"./af.js":55,"./ar":62,"./ar-dz":56,"./ar-dz.js":56,"./ar-kw":57,"./ar-kw.js":57,"./ar-ly":58,"./ar-ly.js":58,"./ar-ma":59,"./ar-ma.js":59,"./ar-sa":60,"./ar-sa.js":60,"./ar-tn":61,"./ar-tn.js":61,"./ar.js":62,"./az":63,"./az.js":63,"./be":64,"./be.js":64,"./bg":65,"./bg.js":65,"./bm":66,"./bm.js":66,"./bn":67,"./bn.js":67,"./bo":68,"./bo.js":68,"./br":69,"./br.js":69,"./bs":70,"./bs.js":70,"./ca":71,"./ca.js":71,"./cs":72,"./cs.js":72,"./cv":73,"./cv.js":73,"./cy":74,"./cy.js":74,"./da":75,"./da.js":75,"./de":78,"./de-at":76,"./de-at.js":76,"./de-ch":77,"./de-ch.js":77,"./de.js":78,"./dv":79,"./dv.js":79,"./el":80,"./el.js":80,"./en-au":81,"./en-au.js":81,"./en-ca":82,"./en-ca.js":82,"./en-gb":83,"./en-gb.js":83,"./en-ie":84,"./en-ie.js":84,"./en-nz":85,"./en-nz.js":85,"./eo":86,"./eo.js":86,"./es":89,"./es-do":87,"./es-do.js":87,"./es-us":88,"./es-us.js":88,"./es.js":89,"./et":90,"./et.js":90,"./eu":91,"./eu.js":91,"./fa":92,"./fa.js":92,"./fi":93,"./fi.js":93,"./fo":94,"./fo.js":94,"./fr":97,"./fr-ca":95,"./fr-ca.js":95,"./fr-ch":96,"./fr-ch.js":96,"./fr.js":97,"./fy":98,"./fy.js":98,"./gd":99,"./gd.js":99,"./gl":100,"./gl.js":100,"./gom-latn":101,"./gom-latn.js":101,"./gu":102,"./gu.js":102,"./he":103,"./he.js":103,"./hi":104,"./hi.js":104,"./hr":105,"./hr.js":105,"./hu":106,"./hu.js":106,"./hy-am":107,"./hy-am.js":107,"./id":108,"./id.js":108,"./is":109,"./is.js":109,"./it":110,"./it.js":110,"./ja":111,"./ja.js":111,"./jv":112,"./jv.js":112,"./ka":113,"./ka.js":113,"./kk":114,"./kk.js":114,"./km":115,"./km.js":115,"./kn":116,"./kn.js":116,"./ko":117,"./ko.js":117,"./ky":118,"./ky.js":118,"./lb":119,"./lb.js":119,"./lo":120,"./lo.js":120,"./lt":121,"./lt.js":121,"./lv":122,"./lv.js":122,"./me":123,"./me.js":123,"./mi":124,"./mi.js":124,"./mk":125,"./mk.js":125,"./ml":126,"./ml.js":126,"./mr":127,"./mr.js":127,"./ms":129,"./ms-my":128,"./ms-my.js":128,"./ms.js":129,"./my":130,"./my.js":130,"./nb":131,"./nb.js":131,"./ne":132,"./ne.js":132,"./nl":134,"./nl-be":133,"./nl-be.js":133,"./nl.js":134,"./nn":135,"./nn.js":135,"./pa-in":136,"./pa-in.js":136,"./pl":137,"./pl.js":137,"./pt":139,"./pt-br":138,"./pt-br.js":138,"./pt.js":139,"./ro":140,"./ro.js":140,"./ru":141,"./ru.js":141,"./sd":142,"./sd.js":142,"./se":143,"./se.js":143,"./si":144,"./si.js":144,"./sk":145,"./sk.js":145,"./sl":146,"./sl.js":146,"./sq":147,"./sq.js":147,"./sr":149,"./sr-cyrl":148,"./sr-cyrl.js":148,"./sr.js":149,"./ss":150,"./ss.js":150,"./sv":151,"./sv.js":151,"./sw":152,"./sw.js":152,"./ta":153,"./ta.js":153,"./te":154,"./te.js":154,"./tet":155,"./tet.js":155,"./th":156,"./th.js":156,"./tl-ph":157,"./tl-ph.js":157,"./tlh":158,"./tlh.js":158,"./tr":159,"./tr.js":159,"./tzl":160,"./tzl.js":160,"./tzm":162,"./tzm-latn":161,"./tzm-latn.js":161,"./tzm.js":162,"./uk":163,"./uk.js":163,"./ur":164,"./ur.js":164,"./uz":166,"./uz-latn":165,"./uz-latn.js":165,"./uz.js":166,"./vi":167,"./vi.js":167,"./x-pseudo":168,"./x-pseudo.js":168,"./yo":169,"./yo.js":169,"./zh-cn":170,"./zh-cn.js":170,"./zh-hk":171,"./zh-hk.js":171,"./zh-tw":172,"./zh-tw.js":172};s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id=245},256:function(e,t,n){n(241);var s=n(32)(n(183),n(261),null,null);e.exports=s.exports},257:function(e,t,n){n(240);var s=n(32)(n(184),n(260),"data-v-afc1077a",null);e.exports=s.exports},258:function(e,t,n){var s=n(32)(n(185),n(259),null,null);e.exports=s.exports},259:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page-two",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("div",{staticClass:"left"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),e._v(" "),n("h1",{staticClass:"title"},[e._v("Page Two")])])]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"padded-full"},[n("h2",[e._v("Order")]),e._v(" "),n("p",[e._v("1x Pizza: "+e._s(e.pizza))]),e._v(" "),n("button",{directives:[{name:"tap",rawName:"v-tap",value:e.onAction,expression:"onAction"}],staticClass:"btn negative cancel",attrs:{"data-order":"cancel"}},[e._v("Cancel")]),e._v(" "),n("button",{directives:[{name:"tap",rawName:"v-tap",value:e.onAction,expression:"onAction"}],staticClass:"btn btn-flat primary order",attrs:{"data-order":"order"}},[e._v("Order")])])])])},staticRenderFns:[]}},260:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("home",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("div",{staticClass:"center"},[n("h1",{staticClass:"title"},[e._v("中网理发店收银台")])])]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"raido_group"},e._l(e.products,function(t,s){return n("div",[n("label",{staticClass:"radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sel_item,expression:"sel_item"}],attrs:{type:"radio",name:"type"},domProps:{value:s,checked:e._q(e.sel_item,s)},on:{change:[function(t){e.sel_item=s},function(t){e.fill_input()}]}}),e._v(" "),n("span"),e._v(" "),n("span",{staticClass:"text"},[e._v(e._s(s+"("+t+"分钱)"))])])])})),e._v(" "),n("div",{staticClass:"parameters"},[n("div",[n("div",{staticClass:"caption"},[e._v("名称：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.p_name,expression:"p_name"}],attrs:{placeholder:"名称"},domProps:{value:e.p_name},on:{input:function(t){t.target.composing||(e.p_name=t.target.value)}}})]),e._v(" "),n("div",[n("div",{staticClass:"caption"},[e._v("价格：")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.price,expression:"price",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"价格"},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),n("div",{staticStyle:{"justify-content":"space-around","margin-top":"10px"}},[e.device_ready?n("button",{staticClass:"btn primary",staticStyle:{flex:"1"},on:{click:function(t){t.preventDefault(),e.read_qr()}}},[n("h3",{staticStyle:{display:"inline-block",margin:"auto"}},[e._v("读取付款码收款")])]):e._e()]),e._v(" "),e.date_num.length>5?n("div",{staticStyle:{"justify-content":"space-around"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.begin_date,expression:"begin_date"}],staticStyle:{flex:"1"},attrs:{type:"date",placeholder:"起始日期"},domProps:{value:e.begin_date},on:{change:function(t){e.filter_by_date()},input:function(t){t.target.composing||(e.begin_date=t.target.value)}}}),e._v(" "),n("div",{staticClass:"caption"},[e._v("——")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.end_date,expression:"end_date"}],staticStyle:{flex:"1"},attrs:{type:"date",placeholder:"截止日期"},domProps:{value:e.end_date},on:{change:function(t){e.filter_by_date()},input:function(t){t.target.composing||(e.end_date=t.target.value)}}})]):e._e(),e._v(" "),n("span",{staticClass:"his-data",staticStyle:{"margin-top":"10px"}},e._l(e.orders,function(t){return n("div",{staticClass:"order"},[n("div",{staticStyle:{"font-size":"24px"}},[e._v(e._s(t.dt))]),e._v(" "),n("div",{staticClass:"order_info"},[n("div",[e._v(e._s(t.name))]),e._v(" "),n("div",[e._v(e._s(t.price)+"(分钱)")]),e._v(" "),n("div",[e._v(e._s(t.status))])])])}))])])},staticRenderFns:[]}},261:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("home",{attrs:{app:e.app}}),e._v(" "),n("page-two",{attrs:{app:e.app}})],1)},staticRenderFns:[]}},262:function(e,t){}});
//# sourceMappingURL=app.379f0074da847cbbb60b.js.map